<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academia ITSON</title>
    <link rel="stylesheet" href="resources/styles/styleMain.css">
    <link rel="icon" href="resources/imgs/academia-logo.png">
    <link rel="stylesheet" href="resources/styles/styleEstadisticas.css">
</head>

<body>

    <section class="content01"></section>
    <nav>
        <img src="resources/imgs/potros.png" alt="POTROS ITSON">
        <div>
            <a href="/" class="link">INICIO</a>
        </div>
        <div>
            <a href="/Estadisticas" class="link">ESTADISTICAS</a>
        </div>
        <div>
            <a href="/JugadoresD" class="link">JUGADORES DESTACADOS</a>
        </div>
        <div>
            <a href="/Pagos" class="link">PAGOS</a>
        </div>
        <div>
            <a href="/Coord" class="link">COORDINADORES</a>
        </div>
        <div>
            <a href="/Standing" class="link">STANDING</a>
        </div>
        <img src="resources/imgs/logo.png" alt="Logo">
    
    </nav>
    <script>
        // Agregar el evento a todos los enlaces con clase 'link'
        document.querySelectorAll('.link').forEach(function(link) {
            link.addEventListener('click', function(e) {
                e.preventDefault(); // Evita que el link se cargue inmediatamente
                const url = this.href; // Captura la URL del enlace

                // Añadir la clase fade-out para iniciar la animación de desvanecimiento
                document.body.classList.add('fade-out');

                // Esperar a que la animación de desvanecimiento termine (0.5s) y luego redirigir
                setTimeout(function() {
                    window.location.href = url; // Cambia a la nueva URL después de la animación
                }, 90); // Espera 500 ms para redirigir
            });
        });
    </script>
    <script src="resources/js/Animaciones.js"></script>
    <section class="content02"></section>
    <section class="content03">
        <div class="card">
            <p>CATEGORIAS:</p>
        </div>
    </section>
    
    <section class="categorias-container">
        <div id="categorias">
            <% categorias.forEach(categoria => { %>
                <div class="categoria">
                    <img src="<%= categoria.url_foto %>" alt="<%= categoria.nombre_categoria %>" width="200">
                    <a href="#equipos"><button onclick="cargarEquipos(<%= categoria.id_categoria %>)">
                        Ver Equipos de <%= categoria.nombre_categoria %>
                    </button>
                </a>
                </div>
            <% }) %>
        </div>
        </section>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        
        <div id="equipos">
            <!-- Aquí se cargarán los equipos dinámicamente -->
        </div>
    
        
        <script>
            async function cargarEquipos(idCategoria) {
                try {
                    const response = await fetch(`/api/equipos/${idCategoria}`);
                    const data = await response.json();
                    const equiposDiv = document.getElementById('equipos');
                    equiposDiv.innerHTML = '';
    
                    if (data.equipos.length > 0) {
                        data.equipos.forEach(equipo => {
                            const equipoDiv = document.createElement('div');
                            equipoDiv.className = 'equipo';
                            equipoDiv.innerHTML = `
                                <img src="${equipo.url_foto}" alt="${equipo.nombre}" width="200">
                                <h3>${equipo.nombre}</h3>
                                <p>Colores: ${equipo.colores}</p>
                                <a href="/estadisticas${equipo.id_equipo} ">Ver Estadisticas</a>
                                <div id="#equipos"></div>
                            `;
                            equiposDiv.appendChild(equipoDiv);
                        });
                    } else {
                        equiposDiv.innerHTML = '<p>No hay equipos para esta categoría.</p>';
                    }
                } catch (error) {
                    console.error('Error al cargar equipos:', error);
                }
            }
        </script>

</body>

</html>