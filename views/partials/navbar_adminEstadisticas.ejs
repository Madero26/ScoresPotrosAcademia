<!-- HEADER PROFESIONAL -->
<header class="topbar">
  <div class="topbar__container">
    <div class="topbar__left">
      <img class="brand" src="/resources/imgs/potros.png" alt="Potros ITSON">
      <span class="title">Panel de estadísticas</span>
    </div>
    <div class="topbar__right">
      <% if (usuario) { %>
        <span class="user">Usuario: <strong><%= usuario.alias || usuario.usuario %></strong></span>
      <% } %>
      <a href="/AdminContra" class="btn btn-outline">Cambiar contraseña</a>
      <a href="/logout" class="btn btn-danger">Cerrar sesión</a>
    </div>
  </div>
</header>

<!-- ACCIONES -->
<nav class="actions">
  <div class="actions__container">
    <div class="actions__grid">

      <!-- CREAR (masivo por equipo) -->
      <div class="action">
        <label for="stats-crear">Crear</label>
        <select id="stats-crear" class="select" onchange="redirigirStats(this)">
          <option>CREAR</option>
          <optgroup label="Carga masiva por equipo">
            <option value="/StatsCargarBateoEquipo">Cargar bateo por equipo</option>
            <option value="/StatsCargarPitcheoEquipo">Cargar pitcheo por equipo</option>
            <option value="/StatsCargarEstadisticaEquipo">Cargar estadísticas del equipo</option>
          </optgroup>
          <optgroup label="Por jugador">
            <option value="/StatsCargarBateoJugador">Cargar bateo de jugador</option>
            <option value="/StatsCargarPitcheoJugador">Cargar pitcheo de jugador</option>
          </optgroup>
        </select>
      </div>

      <!-- ACTUALIZAR (filtro por jugador/equipo) -->
      <div class="action">
        <label for="stats-actualizar">Actualizar</label>
        <select id="stats-actualizar" class="select" onchange="redirigirStats(this)">
          <option>ACTUALIZAR</option>
          <optgroup label="Por jugador">
            <option value="/StatsEditarBateoJugador">Editar bateo de jugador</option>
            <option value="/StatsEditarPitcheoJugador">Editar pitcheo de jugador</option>
          </optgroup>
          <optgroup label="Por equipo">
            <option value="/StatsEditarEstadisticaEquipo">Editar estadísticas del equipo</option>
          </optgroup>
        </select>
      </div>

      <!-- ELIMINAR (filtro por jugador/equipo) -->
      <div class="action">
        <label for="stats-eliminar">Eliminar</label>
        <select id="stats-eliminar" class="select" onchange="redirigirStats(this)">
          <option>ELIMINAR</option>
          <optgroup label="Por jugador">
            <option value="/StatsEliminarBateoJugador">Eliminar bateo de jugador</option>
            <option value="/StatsEliminarPitcheoJugador">Eliminar pitcheo de jugador</option>
          </optgroup>
          <optgroup label="Por equipo">
            <option value="/StatsEliminarEstadisticaEquipo">Eliminar estadísticas del equipo</option>
          </optgroup>
        </select>
      </div>

    </div>
  </div>
</nav>


<script>
  if (!window.__statsNavInit) {
    window.__statsNavInit = true;
    window.redirigirStats = function (select) {
      const url = select.value;
      if (url && !/^(CREAR|ACTUALIZAR|ELIMINAR)$/.test(url)) location.href = url;
      setTimeout(() => (select.selectedIndex = 0), 200);
    };
  }
</script>

