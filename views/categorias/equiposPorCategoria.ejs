<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="icon" href="resources/imgs/academia-logo.png">
    <link rel="stylesheet" href="/resources/styles/styleMain.css">
    <link rel="stylesheet" href="/resources/styles/styleEquiposCategorias.css">

</head>

<body>
    <section class="content01"></section>
    <nav>
        <img src="/resources/imgs/potros.png" alt="POTROS ITSON">
        <div>
            <a href="/" class="link">INICIO</a>
        </div>
        <div>
            <a href="/Estadisticas" class="link">ESTADISTICAS</a>
        </div>
        <div>
            <a href="/JugadoresD" class="link">JUGADORES DESTACADOS</a>
        </div>
        <div>
            <a href="/Pagos" class="link">PAGOS</a>
        </div>
        <div>
            <a href="/Coord" class="link">COORDINADORES</a>
        </div>
        <div>
            <a href="/Standing" class="link">STANDING</a>
        </div>
        <img src="/resources/imgs/logo.png" alt="Logo">

    </nav>
    <script>
        // Agregar el evento a todos los enlaces con clase 'link'
        document.querySelectorAll('.link').forEach(function (link) {
            link.addEventListener('click', function (e) {
                e.preventDefault(); // Evita que el link se cargue inmediatamente
                const url = this.href; // Captura la URL del enlace

                // Añadir la clase fade-out para iniciar la animación de desvanecimiento
                document.body.classList.add('fade-out');

                // Esperar a que la animación de desvanecimiento termine (0.5s) y luego redirigir
                setTimeout(function () {
                    window.location.href = url; // Cambia a la nueva URL después de la animación
                }, 90); // Espera 500 ms para redirigir
            });
        });
    </script>
    <script src="resources/js/Animaciones.js"></script>
    <section class="content02"></section>
    <section class="categorias-section">

        <section class="equipos-section">
            <h1 class="titulo">Equipos de <%= categoriaNombre %>
            </h1>

            <form action="/categoria/<%= categoriaId %>/buscar" method="GET" class="busqueda-form">
                <input list="sugerencias" name="nombre" placeholder="Buscar jugador por nombre..."
                    class="busqueda-input" required>
                <datalist id="sugerencias"></datalist>
                <button type="submit" class="busqueda-btn">Buscar</button>
            </form>

            <script>
                const inputNombre = document.querySelector('input[name="nombre"]');
                inputNombre.addEventListener('input', () => {
                    fetch(`/api/sugerencias-jugadores?term=${inputNombre.value}`)
                        .then(res => res.json())
                        .then(data => {
                            const datalist = document.getElementById('sugerencias');
                            datalist.innerHTML = '';
                            data.forEach(j => {
                                const option = document.createElement('option');
                                option.value = j.nombre_completo;
                                datalist.appendChild(option);
                            });
                        });
                });
            </script>



            <div class="equipos-grid">
                <% equipos.forEach(equipo=> { %>
                    <div class="equipo-card">
                        <img src="/<%= equipo.url_foto %>" alt="Foto equipo" class="equipo-img">
                        <div class="equipo-info">
                            <h2>
                                <%= equipo.nombre %>
                            </h2>
                            <div class="botones">
                                <a href="/equipos/<%= equipo.id_equipo %>/estadisticas" class="btn">Estadísticas del
                                    equipo</a>
                                <a href="/equipos/<%= equipo.id_equipo %>/jugadores"
                                    class="btn btn-secundario">Jugadores del equipo</a>
                            </div>
                        </div>
                    </div>
                    <% }); %>
            </div>
        </section>



</body>

</html>